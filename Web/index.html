<!DOCTYPE html>
<html lang="en" class="light-theme">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Swift Architecture Diagram</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link rel="stylesheet" href="styles/diagram.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Swift Architecture Diagram</h1>
            <div class="controls">
                <div class="control-group">
                    <button id="reset-zoom">üîÑ Reset Zoom</button>
                    <button id="toggle-theme">üåô Toggle Theme</button>
                </div>
                <div class="control-group">
                    <input type="text" id="search-input" placeholder="Search types...">
                </div>
                <div class="filter-group">
                    <label><input type="checkbox" id="show-properties" checked> Properties</label>
                    <label><input type="checkbox" id="show-methods" checked> Methods</label>
                    <label><input type="checkbox" id="show-initializers" checked> Initializers</label>
                    <label><input type="checkbox" id="show-private"> Private</label>
                </div>
            </div>
        </header>
        
        <!-- File Upload Area -->
        <div id="file-upload-area" class="file-upload-area">
            <input type="file" id="file-upload-input" class="file-upload-input" accept=".json">
            <div class="file-upload-text">
                <strong>Click to select</strong> or drag and drop a JSON file here<br>
                <small>Upload your Swift analysis JSON file to visualize the architecture</small>
            </div>
        </div>
        
        <!-- JSON File Selector -->
        <div class="json-selector">
            <select id="json-file-selector">
                <option value="">Loading available files...</option>
            </select>
            <button id="load-json-button">Load JSON</button>
        </div>
        
        <div class="main-content">
            <div class="sidebar">
                <div class="sidebar-header">
                    <h3>Type Explorer</h3>
                    <button class="sidebar-toggle" title="Toggle Sidebar">‚öá</button>
                </div>
                <div id="type-list"></div>
                <div id="type-details"></div>
            </div>
            
            <div class="diagram-container">
                <div class="diagram-search-bar">
                    <input type="text" id="diagram-search-input" placeholder="Search types across the entire diagram...">
                    <div id="search-results" class="search-results-overlay"></div>
                </div>
                <svg id="diagram"></svg>
                <div class="floating-controls">
                    <button class="floating-btn" id="zoom-in" title="Zoom In">üîç+</button>
                    <button class="floating-btn" id="zoom-out" title="Zoom Out">üîç-</button>
                    <button class="floating-btn" id="fit-to-screen" title="Fit to Screen">‚öè</button>
                </div>
            </div>
        </div>
        
        <div class="legend">
            <button class="legend-toggle" title="Toggle Legend">‚ñº</button>
            <div class="legend-item">
                <div class="legend-color class-color"></div>
                <span>Class</span>
            </div>
            <div class="legend-item">
                <div class="legend-color struct-color"></div>
                <span>Struct</span>
            </div>
            <div class="legend-item">
                <div class="legend-color protocol-color"></div>
                <span>Protocol</span>
            </div>
            <div class="legend-item">
                <div class="legend-color enum-color"></div>
                <span>Enum</span>
            </div>
            <div class="legend-item">
                <div class="legend-color actor-color"></div>
                <span>Actor</span>
            </div>
        </div>
    </div>
    
    <!-- External JavaScript Files -->
    <script src="scripts/enhanced-ui.js"></script>
    <script src="scripts/diagram-ui.js"></script>
    <script src="scripts/data-loader.js"></script>
    
    <script>
        // Initialize the application when DOM is ready
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize enhanced UI features
            window.enhancedUI = new EnhancedUI();
            
            // Initialize data loader for file upload and JSON selection
            window.dataLoader = new DataLoader();
        });
    </script>
</body>
</html>